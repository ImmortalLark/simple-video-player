"use strict";(()=>{var f=/(?=.)(mp4|ogg|avi|webm)$/,y="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0";var h=class{constructor(){this.store={}}on(e,t){!t||!(t instanceof Function)||(this.store[e]||(this.store[e]=[]),this.store[e].push(t))}emit(e,t){let i=this.store[e];return i==null?void 0:i.map(r=>r(t))}remove(e,t){if(this.store[e]){if(!t){delete this.store[e];return}this.store[e]=this.store[e].filter(i=>i!==t)}}},w=new h,s=w;function l(o,e){let t=document.createElement("span");return t.className="material-symbols-outlined ".concat(e),t.innerText=o,t}function a(o,e){e.forEach(t=>{o.appendChild(t)})}function n(o,e){let t=document.createElement(o);return t.className=e,t}var d=class{constructor(){this.insertLink();let e=n("div","flex-container--row");a(e,[this.createPlaybackButton(),this.createVolumeAdjustmentButton()]);let t=n("div","flex-container--row");a(t,[this.createSpeedAdjustmentMenu(),this.createPicInPicButton(),this.createFullScreenButton()]),this.container=this.createContainer(),a(this.container,[e,this.createProgressBar(),t])}insertLink(){let e=document.createElement("link");e.rel="stylesheet",e.href=y,document.head.appendChild(e)}createContainer(){return n("div","simple-player__operation-bar")}createPlaybackButton(){let e=l("play_arrow","simple-player__operation-bar__play"),t=!1;return e.onclick=()=>{t=s.emit(t?"operation_pause":"operation_play")[0],e.innerText=t?"pause":"play_arrow"},e}createVolumeAdjustmentButton(){let e=n("div","operation-bar__volume"),t=l("volume_up","simple-player__operation-bar__volume"),i=n("div","operation-bar__volume__bar");return i.addEventListener("click",r=>{let v=r.offsetX/60;i.style.background="linear-gradient(to right, #f0b1b1 ".concat(v*100,"%, #fff 0)"),s.emit("volume_change",v)}),a(e,[t,i]),e}createProgressBar(){return n("div","simple-player__operation-bar__progress")}createSpeedAdjustmentMenu(){let e=n("div","simple-player__operation-bar__speed");e.innerHTML='\n      <span class="material-symbols-outlined icon-close">\n        close\n      </span>1\n    ';let t=n("div","operation-bar__speed__menu");return a(t,["2","1.5","1","0.5"].map(r=>{let c=n("div","speed__menu__item");return c.innerHTML='\n        <span class="material-symbols-outlined icon-close">\n          close\n        </span>'.concat(r,"\n      "),c})),e.appendChild(t),e}createFullScreenButton(){return l("fullscreen","simple-player__operation-bar__fullscreen")}createPicInPicButton(){return l("picture_in_picture_alt","simple-player__operation-bar__pic-in-pic")}},g=d;var u=class{constructor(e){this.width=(e==null?void 0:e.width)||320,this.height=(e==null?void 0:e.height)||180,this.rawVideo=document.createElement("video"),this.rawVideo.className="simple-player__raw-video",this.urls=e.initialUrls,this.createSources(),this.initCanvas(),this.initEventListener()}play(e){if(e&&(this.urls=e),this.createSources(),!this.urls)throw new Error("No videos available to play");this.rawVideo.play(),this.render()}pause(){this.rawVideo.pause()}createSources(){var e,t;this.urls instanceof Array&&((e=this.urls)!=null&&e.length)&&(this.rawVideo.innerHTML="",(t=this.urls)==null||t.forEach(i=>{let r=this.createSource(i);r&&this.rawVideo.appendChild(r)}))}initEventListener(){s.on("operation_play",()=>(this.play(),!0)),s.on("operation_pause",()=>(this.pause(),!1)),s.on("volume_change",e=>(this.rawVideo.volume=e,!1))}initCanvas(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height}createSource(e){var r;let t=(r=e.match(f))==null?void 0:r[0];if(!t)return;let i=document.createElement("source");return i.src=e,i.type="video/".concat(t),i}render(){this.rawVideo.paused||this.rawVideo.ended||(this.ctx.drawImage(this.rawVideo,0,0,this.width,this.height),window.requestAnimationFrame(()=>{this.render()}))}},b=u;var p=class{constructor(e){this.style=e.style,this.initialUrls=e.initialUrls,this.initContainer(e.elementId),this.initCore()}initCore(){this.initVideo(),this.initOperationBar()}initContainer(e){var i,r;let t=document.getElementById(e);if(!t)throw new Error("Container not exist!");t.style.width="".concat(((i=this.style)==null?void 0:i.width)||320,"px"),t.style.height="".concat(((r=this.style)==null?void 0:r.height)||180,"px"),t.className="".concat(t.className," simple-player"),this.container=t}initVideo(){var e,t;this.video=new b({width:(e=this.style)==null?void 0:e.width,height:(t=this.style)==null?void 0:t.height,initialUrls:this.initialUrls}),this.container.appendChild(this.video.rawVideo),this.container.appendChild(this.video.canvas),a(this.container,[this.video.rawVideo,this.video.canvas])}initOperationBar(){this.operationBar=new g,this.container.appendChild(this.operationBar.container)}},j=p;window.SimplePlayer=p;})();
//# sourceMappingURL=index.js.map
